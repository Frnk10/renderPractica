{% extends "./plantilla.html"%}
{%block body%}
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <form action="{% url 'insertarPelicula' %}"  enctype="multipart/form-data" method="post" id="frm_nueva_pelicula">
                    {% csrf_token %}
                    <label for=""><b>TÍTULO:</b></label>
                    <input type="text" name="titulo" id="titulo" class="form-control" placeholder="Ingrese el título de la película">
                    <br>
                    <label for=""><b>DURACIÓN:</b></label>
                    <input type="time" name="duracion" id="duracion" class="form-control" placeholder="Ingrese la duración de la película">
                    <br>
                    <label for=""><b>SINOPSIS:</b></label>
                    <textarea name="sinopsis" id="sinopsis" class="form-control" rows="3" placeholder="Escriba la sinopsis"></textarea>
                    <br>
                    <label for=""><b>PORTADA:</b></label>
                    <input type="file" name="portada" id="portada"
                    accept="image/*" class="form-control">
                    <br>
                    <label for=""><b>GÉNERO:</b></label>
                    <select name="genero" id="genero" class="form-control">
                        {% for generoTemporal in generos %}
                            <option value="{{ generoTemporal.id }}">{{ generoTemporal.nombre }}</option>
                        {% endfor %}
                    </select>
                    <br>
                    <label for=""><b>DIRECTOR:</b></label>
                    <select name="director" id="director" class="form-control">
                        {% for directorTemporal in directores %}
                            <option value="{{ directorTemporal.id }}">{{ directorTemporal.nombre }} {{ directorTemporal.apellido }}</option>
                        {% endfor %}
                    </select>
                    <br>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                    <a href="{% url 'listaPeliculas' %}" class="btn btn-light">Cancelar</a>
                </form>
            </div>
        </div> 
    </div>
    <!--CODIGO PARA VALIDAR-->
    <script>
        // document.getElementById('frm_nueva_pelicula')
        $("#frm_nueva_pelicula").validate({
            rules:{
                titulo:{
                    required:true,
                    minlenght:5,
                    maxlenght:20,

                },
                duracion:{
                    required:true,
                },

                sinopsis:{
                    required:true,
                    minlenght:70,
                    maxlenght:100,
                },
                portada:{
                    required:true
                },
                genero:{
                    required:true
                },
                director:{
                    required:true
                }
            },
            messages:{
                titulo:{
                    required:"Por favor ingrese un título",
                    minlength:"El nombre debe tener mínimo 5 letras",
                    maxlenght:"Máximo 20 letras"
                },
                duracion:{
                    required:"Por favor, ingrese la duración de la película"
                },
                sinopsis:{
                    required:"Debe escribir la sinopsis de la película",
                    minlength:"La sinopsis debe tener mínimo 70 letras",
                    maxlenght:"Máximo 100 letras"
                },
                portada:{
                    required:"Por favor, seleccione una foto"
                },
                genero:{
                    required:"Por favor, escoja un género"
                },
                director:{
                    required:"Por favor, escoja un director"
                }
            }
        });

    </script>
{% endblock %}